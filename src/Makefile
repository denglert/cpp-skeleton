### - Targets
all : ../bin/Binary

# Binary objects dependency
OBJ_BIN = ../lib/Binary.cc.o $(OBJ_CORE)

# Core objects
OBJ_CORE = ../lib/Core.cc.o $(OBJ_CONF)
OBJ_CONF = ../lib/config.cc.o

### - Dependencies
../bin/Binary: $(OBJ_BIN)
	$(CC) $^ $(CLFLAGS) -o $@


####################
## -- Linking -- ###
####################

LIBDIRLINK = $(HOME)/lib/links/libs
INCDIRLINK = $(HOME)/lib/links/inc

#################
### -- C++ -- ###
#################

## - Compiler -- ##
CC     = g++
#CC     = icc

## - Compiler flags - ##
CCFLAGS = -I../inc/ -I$(INCDIRLINK) $(ROOTCFLAGS) $(C++11) -MMD -MF .depend_cpp
CLFLAGS = $(DELPHES_LFLAGS) $(ROOTLFLAGS) 

##
C++11   = --std=c++11
WALL    = -Wall

# Delphes flags
DELPHES_LFLAGS = -L$(LIBDIRLINK) -lDelphes

# ROOT flags
ROOTCFLAGS = `root-config --cflags`
ROOTLFLAGS = -L$(HOME)/lib/build/hep/root/lib -lCore -lCint -lRIO -lNet -lHist -lGraf -lGraf3d -lGpad -lTree -lRint -lPostscript -lMatrix -lPhysics -lMathCore -lThread -lm -ldl

### General compilation rule for .cc sources
../lib/%.cc.o : %.cc
	$(CC) $(CCFLAGS) -c $< -o $@

##################################################################
### Include dependence configuration generated by -MMD & -MF flags
include .depend_cpp

clean : 
	rm ../lib/*
